---
title: 常见 HTTP 状态码
date: 2022-03-16 13:41:10
updated: 2022-03-17 18:41:14
tags: ['HTTP']
categories:
- HTTP
---

# 基本介绍

状态码（Status Code）和原因短语（Reason Phrase）用于**描述请求的结果**。常见的比如：

- 200 OK，表示请求成功；
- 404 Not Found表示请求的资源未找到。

原因短语（上面的ok 和Not Found）是对状态码的解释说明。

形如`200`这样的状态码，这里的第1位数字，通常表示响应的类别，大致可以分成以下几类：

| 状态码 | 含义                                 |
| ------ | :----------------------------------- |
| 1xx    | 请求正被处理                         |
| 2xx    | 请求成功处理                         |
| 3xx    | 请求需要附加操作，常见的例子如重定向 |
| 4xx    | 客户端出错导致请求无法被处理         |
| 5xx    | 服务端处理出错                       |
<!--more-->
# 2xx

## 200 OK

表示请求已经被正常处理，这个比较常见，就不在这赘述了。

## 204 NO Content

> 表示请求成功，但是响应的报文中不含实体主体。通常用于只需要客户端向服务端发送信息，而不需要接受新信息的情况使用

说话人就是：有一种常见的种请求类型`options`，通常被用来做正式请求的预请求，这个请求**只需要确认后续的请求能不能通过，即只需要一个结果，而不需要返回其他内容**，这类请求成功时就会返回204。

## 206 Partial Content

字面意思：客户端进行了范围请求，而服务器成功执行了这部分请求。这种情况必须提到提到一个请求头`Range`：在 http 的请求中，这个头部用来表示**范围请求**。例如：

```awk
'Range':byte=5001-10000 // 表示本次要请求资源的5001-10000字节的部分
```

这种情况下，如果服务器接受范围请求并且成功处理，就会返回`206`,并且在响应的头部返回：

```lasso
'Content-Range':bytes 5001-10000/10000 // 表示整个资源有10000字节，本次返回的范围为 5001-10000字节
```

# 3xx

## 301 Moved Permanently

字面意思：资源被**永久**重定向了。这种情况下响应的头部字段`Location`中一般还会返回一个地址，用来表示要新地址。例如：

```lasso
301 Moved Permanently 
...
Location:'b.com'
...

// 客户端请求的资源已被永久转移，需对新地址 b.com 访问，以后的请求直接访问新地址
```

## 302 Found

字面意思：资源**临时**重定向了。还是举上面的例子：

```lasso
302 Found
...
Location: 'b.com'
...

//上述内容表示：客户端请求的资源被临时转移，后面也有可能再次转移，本次请求访问新地址 b.com，以后的请求还是先访问原来地址。
```

## 303 See Other

这个和302很像，但是有个细微区别是，除了会提示客户端去请求`Location`以外，还会要求请求要使用`Location`时使用`GET`方法。 在这补充一下一个历史背景：

> 请求返回301 302 303 时，几乎所有浏览器都会把原先的POST请求改为GET请求。虽然FRC1945和RFC2068规范中有规定：不允许客户端在重定向时修改方法。

简单的说，实际的浏览器在处理301和302时，默认就会把原先的POST请求改为GET请求，所以实际上使用303的意义，单纯只是让语义化更清晰点。（303表示服务器**明确告诉**客户端，你要使用`GET`方法访问`location`。如果是302，就是仅仅告诉客户端要访问`location`，不限制方法，但是实际上客户端自己也会用`GET`方法访问。）

> 注意：当301，302，303响应状态码返回时，几乎所有的浏览器会把POST改成GET，并删除请求报文内的主体，之后请求会自动再次发送

## 304 Not Modified

 服务器端资源未改变，可直接使用客户端未过期的缓存，不包含任何响应的主体部分。304是3xx里面的一个特例，因为它不算是一个重定向。

这种响应一般是`GET`请求中带有**附加条件**，例如请求头中含有`if-Match`，`if-Modified-Since`等。

`if-Match`表示只请求带有特殊标记的资源，`if-Modified-Since`表示请求指定时间后未变更的资源。

# 4xx

4xx表示一般是客户端发生了错误。

## 400 Bad Request

400的含义简单粗暴：请求中有语法错误。那具体是什么语法错误呢?一般来说响应报文里会有一些提示，例如：

- 多加了请求头
- 请求地址错误导，该 uri 不存在
- 请求方法错误，该 uri 之只能用 put 而不是 post
- ...

## 401 Unauthorized

字面意思：未经过认证。一般在后台系统之类的应用里，用户登录之后会获得一个身份认证信息，然后生成`mac`之类的信息，放在请求头的`Authorization`字段里，发送给服务端，如果这个认证信息有问题或者根本没发送，就会出现这个状态码。

## 403 Forbidden

这个就简单了：禁止访问也就是无权限访问。禁止原因一般由服务器在响应内中给出。

## 404 Not Find

这个错误可以说是很常见了，表示服务端没有找到所请求的资源。（经验表明，一般这个错误是客户端的请求url写错了。）

# 499 Client Has Closed Connection

服务器端处理的时间过长，客户端主动断开链接，nginx定义的状态码。

# 5xx

5xx表明服务端发生了错误。

## 500 Internal Server Error

简单粗暴，服务器故障了。啥？你问我什么故障？我哪知道，我只会熟练地把bug转给隔壁的服务端同学。

*评论区有读者提到漏掉了502和504，想想还是补上吧，虽然要说明这俩还得稍微解释下网关和代理（懒性暴露），但是平时开发的时候确实也经常出现，尤其是使用nginx进行调试的时候。顺便安利一下教程 [windows下使用nginx调试](https://segmentfault.com/a/1190000018151099)*

## 502 Bad Gateway

作为**网关**或者**代理**工作的服务器尝试执行请求时，从上游服务器接收到无效的响应。这里说明下网关和代理服务器的概念：前面我们举例子都是直接客户端向服务器发请求，实际上客户端有时候不是直接向服务器请求，这中间可能存在网关和代理：

- **代理**连接的是两个或多个使用相同协议的应用程序。
- **网关**连接的是两个或多个使用不同协议的端点，扮演“协议转换器”的角色。

![image](https://user-images.githubusercontent.com/33454514/157812931-33161215-7936-431d-a6c0-215718fa6044.png)

## 503 Service Unavailable

服务器暂时处于超负荷或正在进行停机维护，现在无法处理请求。

## 504 Gateway Timeout

作为**网关**或者**代理**工作的服务器访问超时。
